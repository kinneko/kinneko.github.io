+++
date = "2025-11-21 00:00:00"
draft = false
title = "NTP時刻同期時計再び -3-"
description = "前のパッチでSSIDの入力画面で、接続可能なAPのリストが出なくなっている。"

[taxonomies]
tags = ["EPS32", "Arduino", "NTP", "時計"]

[extra]
image = "/ESP32.png"
+++
　家のAPが長いSSIDのひととか、ホテルでの見慣れないSSIDを入力するのが面倒なこともあるなということで、接続可能なAPのリストが出るようにする。

　まぁ、家以外では、電源が別に必要な部屋用の時計を持ち歩いて使ったりはしないとは思うけどw

　変更するとはいっても、変更する場所はシンプルに、WiFiManager.cppに加えた変更のhandleRoot()を、false -> true にするだけ。

  
```
void WiFiManager::handleRoot() {
  #ifdef WM_DEBUG_LEVEL
  DEBUG_WM(WM_DEBUG_VERBOSE,F("<- HTTP Root"));
  #endif

  if (captivePortal()) return;

  // ★ スキャンありの WiFi 設定画面に直行させる
  handleWifi(true);
}
```
  

　というわけで、APリストを選んで入力を省くことができるようになった。

  
![](/2025-11-21/8330MLqKKUKGh50ed8K3XlCn.jpeg)
  

　LEDが日中の室内でも高くて眩しいので、輝度というか出力を少し下げる。

　前はhexで10を指定していたけど、有効ではなかったのかな？ 一応、ちゃんと暗くなっていたのだけど。ライブラリのバージョンアップで仕様が変わったのか？ 少なくとも、今は有効ではないようだ。

　本来のライブラリでの指定範囲は0-7で、この設定は十進でいいみたい。
　室内用なら0でもいい具合かな。

  
```
  display.setBrightness(0);
```
  

　直接見ても眩しさはなくなった。

　今回は、なんか記事が短くなっちゃったけど、この件は、他に書くことがなさそうなので終わる。

　ほんとは、もうちょっと苦労する予定だったのだけど、AI様のおかげであっさり終わってしまった。

　薄い本の改定までする元気はないかな... 
　本のほうのコメントに、今回の記事をリンクしておくか...

>　　NTPで時刻同期する時計作ってみた #マッハ新書 - kinnekoの薄い本屋 - BOOTH  
>　　<https://kinneko.booth.pm/items/1258594>

---
> 初出：  
>　　NTP時刻同期時計再び -3-｜kinneko｜pixivFANBOX  
>　　<https://kinneko.fanbox.cc/posts/10925303>

