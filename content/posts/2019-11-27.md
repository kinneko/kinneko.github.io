+++
date = "2019-11-27 08:21:31"
draft = false
title = "Yubikeyを導入してみる 3"
description = "FIDO(ファイド)は、\"Fast IDentity Online\"を縮めた名前で、FIDOアライアンスが公開>している規格で、物理的なセキュリティトークンや生体認証技術を使ったオンライン・ユ>ーザー認証を行うことを目的とした認証技術の総称。"

[taxonomies]
tags = ["yubikey", "security"]

[extra]
image = "/2019-11-27/Zvu1NendvAB016bxVqCqx6aH.png"
+++

　FIDO(ファイド)は、"Fast IDentity Online"を縮めた名前で、FIDOアライアンスが公開している規格で、物理的なセキュリティトークンや生体認証技術を使ったオンライン・ユーザー認証を行うことを目的とした認証技術の総称。  
　FIDO技術のうち、多要素認証でパスワードと併用されるセキュリティトークンを使う認証をU2F(Universal 2nd Factor authentication)と呼び、指紋や静脈など生体認証を使うものをUAF(Universal Authentication Framework)と呼ぶ。現在は、これらをまとめたFIDO2という規格が使われている。  
　WebAuthnは、Web Authentication APIの略で、FIDO2プロジェクトが定めたWebアプリケーションとAuthenticatorを繋ぐJavaScript APIのこと。U2Fを直接実行するAPIはchromeブラウザしか対応できていないが、WebAuthnは多くのブラウザで対応しており、FIDO U2F対応のセキュリティキーでも利用できる。そのため、ブラウザではU2F APIが普及することはなく、WebAuthnが主流になっている。  

>　Web Authentication API - Web API | MDN  
>　https://developer.mozilla.org/ja/docs/Web/API/Web_Authentication_API#Web_authentication_%E3%81%AE%E6%A6%82%E5%BF%B5%E3%81%A8%E4%BD%BF%E3%81%84%E6%96%B9

　Microsoftでも、WebAuthnの評価ができるサイトを公開している。

> WebAuthn Test App  
> <https://webauthntest.azurewebsites.net/>

　調べてみると、認証テストできるサイトは結構たくさん公開されている。以下は一例。

> https://webauthn.org/ (証明書が期限切れで使えない)  
> WebAuthn.io　https://webauthn.io/  
> WebAuthn Test App　https://prod-fido-fido2-server.line-apps.com/  

　MicrosoftのサイトのURIにアクセスすると、以下にリダイレクトされる。

> <https://webauthntest.azurewebsites.net/login.html>

　画面には、"Sign in"としか書かれていない。適当なユーザー名を指定して"SIGN IN"をクリックして進む。  

![](/2019-11-27/XiYNwXIe4uei6fFdZpJ2D8GD.png)

　画面は移動して以下のようになった。特にヘルプもガイドも出ない。右側に３つある赤いボタン風のところをクリックしてみる。

![](/2019-11-27/Zvu1NendvAB016bxVqCqx6aH.png)

　左側のプラスボタンをクリックすると以下のような画面になった。

![](/2019-11-27/H1FXroWbGl80abTuXVTs9R8U.png)

RP Info

![](/2019-11-27/wmaVEqhhfhEbfi25qPKlP4vy.png)

User Info

![](/2019-11-27/n2sQfQpndTSkf9xUBMEvWMhc.png)

Attachment

![](/2019-11-27/teSvECn5I5p611Yl30DtThyx.png)

Require Resident Key

![](/2019-11-27/QNeto3ObNyAHNqp7VU9yjtA7.png)

User Verification

![](/2019-11-27/3JPFLijuYKOkBoVDv4fWg6fs.png)

Attestation

![](/2019-11-27/CAkJwUu2li9e5Kbxt7dk3Mzv.png)

CredProtect Extention

![](/2019-11-27/WS23nicNB86JJcO7uvqnkwG8.png)

Enforce CredProtect

![](/2019-11-27/Hx237zZDqeBTaGnWeujejWca.png)

HMAC Extention

![](/2019-11-27/ZOjftMaiRBh6jQqsSTfxDdpb.png)

　中央の鍵マークをクリックすると、以下のような画面が表示された。

![](/2019-11-27/jipcOM3RiUVhl9j1cimEZP50.png)

PR ID

![](/2019-11-27/4zupSN9xpcvntHqC9BpvXoHR.png)

User Verification

![](/2019-11-27/uGy2g9Wai0ooV36UXKg7pAL3.png)

　右の３点マークをクリックすると、以下のような画面が表示された。

![](/2019-11-27/x2UBjURVuM2tPye9MP2ibCbD.png)

　何も知らない段階で、この細かいオプションを理解してテストするのは難しい。これはテストには使えない。

つづく

---
> オリジナル投稿：
> Yubikeyを導入してみる 3｜kinneko｜pixivFANBOX  
> <https://www.fanbox.cc/@kinneko/posts/609682>
